<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShadowVapes Admin</title>
  <link rel="stylesheet" href="assets/styles.css" />
  <meta name="color-scheme" content="dark light">
</head>
<body>
  <div class="bg"></div>
  <header class="topbar">
    <div class="wrap topbar-inner">
      <div class="brand">
        <div class="logo">SV</div>
        <div class="brand-text">
          <div class="brand-name">Admin</div>
          <div class="brand-sub">Products + Sales + GitHub Save</div>
        </div>
      </div>

      <div class="top-actions">
        <a class="chip ghost" href="index.html">Katalógus</a>
        <button class="chip" id="reloadBtn" title="Újratöltés">↻ Reload</button>
      </div>
    </div>
  </header>

  <main class="wrap main">
    <section class="panel">
      <div class="panel-head">
        <div>
          <h1>Beállítások</h1>
          <p class="muted">GitHub mentés tokennel (localStorage-ben tárolva).</p>
        </div>
        <div class="row">
          <button class="btn" id="loadBtn">Adatok betöltése</button>
          <button class="btn primary" id="saveBtn">Mentés GitHub-ra</button>
        </div>
      </div>

      <div class="form-grid">
        <div class="field">
          <label>GitHub Owner</label>
          <input id="ghOwner" placeholder="pl. tesouser" />
        </div>
        <div class="field">
          <label>Repo</label>
          <input id="ghRepo" placeholder="pl. shadowvapes" />
        </div>
        <div class="field">
          <label>Branch</label>
          <input id="ghBranch" placeholder="main" />
        </div>
        <div class="field">
          <label>GitHub Token</label>
          <input id="ghToken" placeholder="ghp_..." type="password" />
        </div>
      </div>

      <div class="note">
        <div class="note-title">Fontos</div>
        <div class="note-body">
          A token csak nálad van (localStorage). Mentéshez kell “repo” scope (classic token) vagy fine-grained repo content write.
        </div>
      </div>
    </section>

    <section class="panel">
      <div class="panel-head">
        <div>
          <h2>Kategóriák</h2>
          <p class="muted">“Összes termék” automatikus. “Hamarosan” mindig legalul.</p>
        </div>
        <div class="row">
          <button class="btn" id="addCategoryBtn">+ Kategória</button>
        </div>
      </div>

      <div class="table" id="categoriesTable"></div>
    </section>

    <section class="panel">
      <div class="panel-head">
        <div>
          <h2>Termékek</h2>
          <p class="muted">Status: ok / out / soon. “soon” csak a Hamarosan tabban látszik.</p>
        </div>
        <div class="row">
          <input id="adminSearch" class="adminSearch" placeholder="Keresés név/íz alapján..." />
          <button class="btn" id="addProductBtn">+ Termék</button>
        </div>
      </div>

      <div class="table" id="productsTable"></div>
    </section>

    <section class="panel">
      <div class="panel-head">
        <div>
          <h2>Eladások</h2>
          <p class="muted">Több tétel / eladás. Törlésnél stock rollback. Dátum: csak YYYY-MM-DD.</p>
        </div>
        <div class="row">
          <button class="btn" id="addSaleBtn">+ Eladás</button>
        </div>
      </div>

      <div class="split">
        <div>
          <div class="subhead">Eladások listája</div>
          <div class="table" id="salesTable"></div>
        </div>
        <div>
          <div class="subhead">Bevétel</div>
          <div class="kpi">
            <div class="kpi-card">
              <div class="kpi-label">Összes bevétel</div>
              <div class="kpi-value" id="revTotal">0</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Mai (dátum szerint)</div>
              <div class="kpi-value" id="revToday">0</div>
            </div>
          </div>
          <div class="table" id="revenueTable"></div>
        </div>
      </div>
    </section>

    <div class="toast" id="toast" hidden></div>

    <!-- Modal -->
    <div class="modal" id="modal" hidden>
      <div class="modal-backdrop" data-close="1"></div>
      <div class="modal-card">
        <div class="modal-head">
          <div class="modal-title" id="modalTitle">Modal</div>
          <button class="iconbtn" id="modalClose">✕</button>
        </div>
        <div class="modal-body" id="modalBody"></div>
        <div class="modal-foot" id="modalFoot"></div>
      </div>
    </div>

    <footer class="footer">
      <div class="muted">Tip: Mentés után automatikus reload ajánlott.</div>
    </footer>
  </main>

  <script src="assets/github.js"></script>
  <script src="assets/admin.js"></script>
</body>
</html>
